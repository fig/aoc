#!/usr/bin/env ruby

require 'aoc'
require 'thor'
require 'date'

class CLI < Thor
  desc "fetch [day] [year]", "fetch and display a challenge description."
  method_option :input, :aliases => "-i", :type => :boolean, :default => false, :desc => "only show the input of the challenge."
  def fetch(day, year)
    challenge = Aoc::Challenge.new(day, year)

    unless options[:input]
      begin
        puts "Fetching: day #{day}, #{year}"
        puts challenge.part1
        puts challenge.part2
      rescue OpenURI::HTTPError
        puts "Cannot find this challenge, make sure it exists."
      end
    else
      begin
        puts challenge.input
      rescue OpenURI::HTTPError
        puts "Cannot find the input for your challenge. Make sure your session key is valid."
      end
    end
  end
end

CLI.start
